
opentelemetry-collector:

  mode: deployment

  replicaCount: 2



  image:

    repository: otel/opentelemetry-collector-contrib

    tag: "0.121.0"



  service:

    enabled: true



  config:

    receivers:

      otlp:

        protocols:

          grpc:

            endpoint: 0.0.0.0:4317

          http:

            endpoint: 0.0.0.0:4318



    processors:

      memory_limiter:

        check_interval: 5s

        limit_percentage: 80

        spike_limit_percentage: 25

      batch: {}



    exporters:

      otlp/tempo:

        endpoint: tempo-dev:4317

        tls:

          insecure: true

      debug:

        verbosity: detailed



    service:

      telemetry:

        metrics:

          address: 0.0.0.0:8888

      pipelines:

        traces:

          receivers: [otlp]

          processors: [memory_limiter, batch]

          exporters: [otlp/tempo]

        metrics:

          receivers: [otlp]

          processors: [memory_limiter, batch]

          exporters: [debug]

        logs:

          receivers: [otlp]

          processors: [memory_limiter, batch]

          exporters: [debug]

