
prometheus:

  serverFiles:

    alerting_rules.yml:

      groups:

        - name: OTelCollectorExporter

          rules:

            - alert: OTelCollectorExporterQueueGrowing

              expr: otelcol_exporter_queue_size > 0

              for: 5m

              labels:

                severity: warning

              annotations:

                summary: "OTel exporter queue not empty"

                description: "Exporter queue_size > 0 for 5m (instance={{ $labels.instance }}, exporter={{ $labels.exporter }}, data_type={{ $labels.data_type }})"

            - alert: OTelCollectorExporterSendFailedSpans

              expr: rate(otelcol_exporter_send_failed_spans[5m]) > 0

              for: 5m

              labels:

                severity: critical

              annotations:

                summary: "OTel exporter is failing to send spans"

                description: "send_failed_spans > 0 for 5m (instance={{ $labels.instance }}, exporter={{ $labels.exporter }})"

